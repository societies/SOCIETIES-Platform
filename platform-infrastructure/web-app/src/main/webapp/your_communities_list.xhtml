<html xmlns="http://www.w3.org/1999/xhtml">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="templates/main_template.xhtml">

    <ui:define name="html_head">
        <title>SOCIEITES</title>
    </ui:define>

    <ui:define name="body">


        <div class="hr grid_12 clearfix"></div>
        <section class="grid_12">
            <section>
                <div class="breadcrumbs"><a href="">Home</a> / <a href="">Page</a></div>
            </section>
            <div class="websearchbar">
                <div class="websearchtitle">
                    <h4 class="form_title">Your Communities</h4>
                </div>
                
            </div>
        </section>
        <!-- Left Column -->
        <article id="left_col" class="grid_8">
            <section class="itemlist">
                <header><H5>Role: Participant</H5>
                </header>
                <ol class="keyinfolist">
                    <c:forEach items="#{cismanager.membercommunities}" var="snsFriend">
    				    <li class="keyinfo bypostauthor">
                        <figure class="gravatar">
                            <a class="friend_profile.xhtml"><img alt="" src="images/launcher_societies.png"
                                                                height="58" width="58"/></a>
                        </figure>
                        <div class="keyinfo_content">
                            <div class="clearfix">
                                <br/>
                                <H6>Name:     #{snsFriend.getCisname()}</H6> 								
                                <!-- <H6>Identity: #{snsFriend.getCisid()}</H6> -->
                                <!-- Doesnt work unless you own the CIS -->
                            </div>
                            <div class="keyinfo_text">
                            </div>
                        </div>
                        <p:commandButton value="Leave Community" action="#{cismanager.leavecis(snsFriend)}"/>
                        </li>
                      </c:forEach>
                </ol>
                <div class="hr clearfix"></div>
            </section>
            <section class="itemlist">
                <header><H5>Role: Owner</H5></header>
                <ol class="keyinfolist">
                    <c:forEach items="#{cismanager.ownedcommunities}" var="otherFriend">
    				    <li class="keyinfo bypostauthor">
                        <figure class="gravatar">
                            <a class="friend_profile.xhtml"><img alt="" src="images/launcher_societies.png"
                                                                height="58" width="58"/></a>
                        </figure>
                        <div class="keyinfo_content">
                            <div class="clearfix">
                                <br/>
                                <H6>Name:     #{otherFriend.getCisname()}</H6> 								
                                <!-- <H6>Identity: #{otherFriend.getCisid()}</H6> -->
                                <!-- To Stay consistent, this is disabled as you can't view members
                                of a CIS which you do not own. -->
                            </div>
                            <div class="keyinfo_text">
                            </div>
                        </div>
                        <p:commandButton type="button" value="Delete Community" onclick="cdelete.show();" icon="ui-icon-trash"/>
                        

					<p:confirmDialog id="confirmationDeleteDialog" widgetVar="cdelete"
						global="true"
						message="Are you sure you want to delete this community permanently?"
						icon="ui-icon-alert">
						<p:commandButton value="Yes" styleClass="ui-confirmdialog-yes"
							icon="ui-icon-check" action="#{cismanager.deleteCommunity(otherFriend)}"
							ajax="false" />
						<p:commandButton value="No" styleClass="ui-confirmdialog-no"
							icon="ui-icon-close" oncomplete="cdelete.hide();" />
					</p:confirmDialog>
					<p:dialog id="cantDeleteDialog" header="Delete Community cannot be done" widgetVar="cantDeleteDlg" modal="true" height="100" dynamic="true" showHeader="true">
                        	<h:outputText value="Sorry, this CIS has other members. To delete this CIS, please ask the members to leave the CIS." />
                    </p:dialog>  
                        </li>
                      </c:forEach>
                </ol>
                <div class="hr clearfix"></div>
            </section>
        </article>
        
        <!-- Right Column / Sidebar -->
        <aside id="sidebar_right" class="grid_4">
            <div class="sidebar_top_BG"></div>
            <div class="hr dotted clearfix"></div>
            <section>
                <header>
                    <h3>Owned Communities...</h3>
                </header>
       	 		<br/> <br/>
                <ul>
                	<ui:repeat value="#{cismanager.ownedcommunities}" var="friend">
                		<li> #{friend.getCisname()}</li>
                	</ui:repeat>
                </ul>
            </section>
            <section>
                <header>
                    <h3>Other Activity</h3>
                </header>
                <div class="hr dotted clearfix"></div>
       	 		<br/> <br/>
            </section>
            <div class="hr dotted clearfix"></div>
            <div class="sidebar_bottom_BG"></div>
        </aside>
        <div class="hr grid_12 clearfix"></div>

    </ui:define>
</ui:composition>
</html>
